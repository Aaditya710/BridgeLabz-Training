CREATE DATABASE trasaction_management;
USE trasaction_management;
CREATE TABLE account(
account_id INT PRIMARY KEY,
account_holder VARCHAR(50),
balance DECIMAL(10, 2)
) ENGINE = InnoDB;

CREATE TABLE trasaction_history(
transaction_id INT auto_increment PRIMARY KEY,
from_account INT,
to_account INT,
amount DECIMAL(10,2),
transaction_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
)ENGINE = InnoDB;

INSERT INTO account VALUES
(101, "Alice", 2000.00),
(102, "Bob", 3000.00),
(103, "Charlie", 1200.00);

SELECT * from account;

SELECT account_holder,balance
FROM account
WHERE account_holder = "Alice" and balance >= 1000;

START TRANSACTION ;

SELECT balance
FROM account
WHERE account_id = 101
FOR UPDATE;

UPDATE account
SET balance = balance + 3000
WHERE account_id = 102;

INSERT INTO trasaction_history(from_account, to_account, amount)
VALUES (101, 102, 1000);

COMMIT;

SELECT * FROM account;
SELECT * FROM trasaction_history;